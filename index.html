<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Garden Party Planner with Auto-Save and Summary</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background-color: #f4f7f2;
    color: #2f3e2f;
}

header {
    text-align: center;
    padding: 40px 20px;
    background: linear-gradient(to right, #cde5cd, #eaf4ea);
}

header h1 {
    margin: 0;
    font-size: 2.2rem;
}

header p {
    margin-top: 10px;
    font-size: 1.1rem;
    opacity: 0.8;
}

.container {
    max-width: 1000px;
    margin: 30px auto;
    padding: 20px;
}

.section {
    padding: 25px;
    margin-bottom: 25px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}

/* Color-coded cards for each timeline */
.section:nth-child(odd) { background-color: #eaf4ea; }
.section:nth-child(even) { background-color: #d1e7d1; }

.section h2, .section h3 {
    margin-top: 0;
    color: #3b5d3b;
}

/* Task checklist */
.task-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.task-item input[type="checkbox"] {
    margin-right: 10px;
}

/* Budget table */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

table th, table td {
    border: 1px solid #ddd;
    padding: 8px;
}

table th {
    background-color: #cde5cd;
    text-align: left;
}

input[type="text"], input[type="number"] {
    width: 90%;
    padding: 6px;
    border-radius: 4px;
    border: 1px solid #ccc;
}

button {
    padding: 8px 16px;
    margin-top: 8px;
    background-color: #3b5d3b;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

button:hover {
    background-color: #2f4b2f;
}

.total-cost {
    margin-top: 10px;
    font-weight: bold;
    font-size: 1rem;
}

#overall-summary {
    background-color: #cde5cd;
    padding: 15px;
    border-radius: 10px;
    font-weight: bold;
    margin-bottom: 25px;
    text-align: center;
}
</style>
</head>

<body>

<header>
    <h1>Interactive Garden Party Planner</h1>
    <p>Auto-save tasks & budgets, with overall cost summary!</p>
</header>

<div class="container">
    <div id="overall-summary">Total Cost Across All Timelines: $0</div>
    <div id="planner-container">
        <!-- Timeline sections injected here -->
    </div>
</div>

<script>
// ===== Preloaded Timeline Tasks =====
const tasksData = {
    "1–2 Weeks Before: Planning & Foundations": [
        "Decide the purpose & vibe (casual brunch, evening cocktails, BBQ, etc.)",
        "Set a date, time, and guest count",
        "Choose a theme / color palette",
        "Create a rough budget",
        "Plan the menu (homemade vs catered vs potluck)",
        "Check weather patterns + decide on a backup plan",
        "Make a guest list and send invites",
        "List what you already have vs what you need (tables, chairs, lights, serveware)"
    ],
    "5–7 Days Before: Prep Mode": [
        "Finalize the menu & drinks",
        "Order or shop for non-perishable food",
        "Drinks & ice plan",
        "Disposable items (napkins, cups, plates if needed)",
        "Arrange rentals (chairs, tables, umbrellas, heaters)",
        "Plan seating & table layout",
        "Test outdoor lighting",
        "Prepare a playlist",
        "Tidy the garden (weeding, sweeping, pruning)"
    ],
    "2–3 Days Before: Execution Begins": [
        "Grocery shop for fresh ingredients",
        "Clean outdoor space",
        "Clean bathrooms",
        "Clean kitchen",
        "Prep make-ahead foods (sauces, marinades, desserts)",
        "Chill drinks that can be chilled early",
        "Iron / set aside table linens",
        "Charge speakers, lights, candles, power banks"
    ],
    "1 Day Before: Set the Stage": [
        "Arrange tables and chairs",
        "Set up tablecloths",
        "Set up centerpieces",
        "String lights / candles",
        "Prep serving trays & label dishes if needed",
        "Final garden sweep",
        "Confirm RSVPs",
        "Lay out an event-day checklist",
        "Get a good night’s sleep (underrated but critical)"
    ],
    "Day Of – Morning": [
        "Light cleaning touch-ups",
        "Finish food prep",
        "Chill drinks & prep ice",
        "Set up drink station",
        "Place trash & recycling bins discreetly",
        "Do a walk-through of the flow (entry → seating → food → drinks)"
    ],
    "1 Hour Before Guests Arrive": [
        "Final table setting",
        "Food out (or warming)",
        "Background music on",
        "Candles/lights ready",
        "Change into hosting outfit",
        "Deep breath + mindset shift from manager → host"
    ],
    "During the Party": [
        "Greet guests",
        "Refill drinks & food as needed",
        "Quietly manage timing",
        "Take photos (or assign someone)",
        "Let go of perfection"
    ],
    "After the Party": [
        "Clear food safely",
        "Quick cleanup (trash, dishes soak)",
        "Leave deep cleaning for the next day",
        "Mentally note what worked & what didn’t"
    ]
};

const container = document.getElementById("planner-container");
const overallSummaryEl = document.getElementById("overall-summary");

// Load saved data from localStorage
let savedData = JSON.parse(localStorage.getItem("gardenPlannerData")) || {};

// ===== Render Each Section =====
for (let section in tasksData) {
    const sectionDiv = document.createElement("div");
    sectionDiv.className = "section";

    const h2 = document.createElement("h2");
    h2.textContent = section;
    sectionDiv.appendChild(h2);

    // Task list
    tasksData[section].forEach((task, idx) => {
        const taskDiv = document.createElement("div");
        taskDiv.className = "task-item";
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";

        // Load saved checkbox state
        if (savedData[section] && savedData[section].tasks && savedData[section].tasks[idx]) {
            checkbox.checked = savedData[section].tasks[idx];
        }

        checkbox.onchange = () => {
            saveTasks();
        };

        const span = document.createElement("span");
        span.textContent = task;
        taskDiv.appendChild(checkbox);
        taskDiv.appendChild(span);
        sectionDiv.appendChild(taskDiv);
    });

    // Budget Table
    const budgetTable = document.createElement("table");
    const thead = document.createElement("thead");
    thead.innerHTML = `
        <tr>
            <th>Item</th>
            <th>Estimated Cost ($)</th>
            <th>Action</th>
        </tr>`;
    budgetTable.appendChild(thead);

    const tbody = document.createElement("tbody");
    budgetTable.appendChild(tbody);
    sectionDiv.appendChild(budgetTable);

    // Input fields for budget
    const inputDiv = document.createElement("div");
    inputDiv.style.marginTop = "10px";
    inputDiv.innerHTML = `
        <input type="text" placeholder="Item name" class="budget-item-name">
        <input type="number" placeholder="Estimated cost" class="budget-item-cost">
        <button>Add Item</button>
        <div class="total-cost">Total: $0</div>
    `;
    sectionDiv.appendChild(inputDiv);

    const addBtn = inputDiv.querySelector("button");
    const itemNameInput = inputDiv.querySelector(".budget-item-name");
    const itemCostInput = inputDiv.querySelector(".budget-item-cost");
    const totalCostEl = inputDiv.querySelector(".total-cost");

    let sectionTotal = 0;

    // Load saved budget data
    if (savedData[section] && savedData[section].budget) {
        savedData[section].budget.forEach(b => {
            const row = createBudgetRow(b.name, b.cost, tbody, totalCostEl);
            tbody.appendChild(row);
            sectionTotal += b.cost;
        });
        totalCostEl.textContent = `Total: $${sectionTotal.toFixed(2)}`;
    }

    // Add new budget item
    addBtn.onclick = () => {
        const name = itemNameInput.value.trim();
        const cost = parseFloat(itemCostInput.value);
        if (name === "" || isNaN(cost)) return;

        const row = createBudgetRow(name, cost, tbody, totalCostEl);
        tbody.appendChild(row);
        sectionTotal += cost;
        totalCostEl.textContent = `Total: $${sectionTotal.toFixed(2)}`;

        itemNameInput.value = "";
        itemCostInput.value = "";
        saveTasks();
    };

    container.appendChild(sectionDiv);
}

// ===== Create Budget Row Function =====
function createBudgetRow(name, cost, tbody, totalCostEl) {
    const row = document.createElement("tr");
    const nameCell = document.createElement("td");
    nameCell.textContent = name;
    const costCell = document.createElement("td");
    costCell.textContent = cost.toFixed(2);
    const actionCell = document.createElement("td");
    const delBtn = document.createElement("button");
    delBtn.textContent = "Delete";
    delBtn.style.backgroundColor = "#c94b4b";
    delBtn.onclick = () => {
        tbody.removeChild(row);
        updateOverallSummary();
        saveTasks();
    };
    actionCell.appendChild(delBtn);
    row.appendChild(nameCell);
    row.appendChild(costCell);
    row.appendChild(actionCell);
    return row;
}

// ===== Save Tasks & Budgets to localStorage =====
function saveTasks() {
    const sections = container.querySelectorAll(".section");
    const data = {};
    sections.forEach(sec => {
        const title = sec.querySelector("h2").textContent;
        const tasks = Array.from(sec.querySelectorAll(".task-item input[type='checkbox']")).map(cb => cb.checked);
        const budgetRows = Array.from(sec.querySelectorAll("tbody tr"));
        const budget = budgetRows.map(r => ({
            name: r.children[0].textContent,
            cost: parseFloat(r.children[1].textContent)
        }));
        data[title] = { tasks, budget };
    });
    localStorage.setItem("gardenPlannerData", JSON.stringify(data));
    updateOverallSummary();
}

// ===== Update Overall Summary =====
function updateOverallSummary() {
    const data = JSON.parse(localStorage.getItem("gardenPlannerData")) || {};
    let total = 0;
    for (let section in data) {
        if (data[section].budget) {
            total += data[section].budget.reduce((sum, b) => sum + b.cost, 0);
        }
    }
    overallSummaryEl.textContent = `Total Cost Across All Timelines: $${total.toFixed(2)}`;
}

// Initial summary update
updateOverallSummary();
</script>

</body>
</html>
